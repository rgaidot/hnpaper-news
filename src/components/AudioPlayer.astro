---
interface Props {
  title: string;
  slug: string;
  formattedDate: string;
}

const { title, slug, formattedDate } = Astro.props;
---

<div id="player-container" data-title={title} data-slug={slug} class="fixed bottom-0 left-0 right-0 z-50 flex items-center gap-4 md:gap-6 px-4 md:px-8 py-4 md:py-6 bg-black/80 backdrop-blur-md text-white border-t border-white/10 opacity-75">
  <div class="hidden sm:flex flex-col min-w-0">
    <h1 class="text-sm md:text-base font-bold font-serif uppercase truncate">{formattedDate}</h1>
  </div>
  
  <audio 
    id="audio-player"
    controls 
    class="flex-1 h-10 accent-stone-500"
    src={`/audio/${slug}.mp3`}
  >
    Your browser does not support the audio element.
  </audio>

  <div class="flex items-center gap-3 md:gap-4 shrink-0">
    <button id="cast-button" class="hidden text-stone-400 hover:text-white transition-colors p-1" aria-label="Caster sur un appareil" title="Caster sur un appareil">
      <svg style="width:24px;height:24px" viewBox="0 0 24 24">
        <path fill="currentColor" d="M1,18L1,21L4,21C4,19.34 2.66,18 1,18M1,14L1,16C3.76,16 6,18.24 6,21L8,21C8,17.13 4.87,14 1,14M1,10L1,12C5.97,12 10,16.03 10,21L12,21C12,14.92 7.07,10 1,10M21,3L3,3C1.9,3 1,3.9 1,5L1,8L3,8L3,5L21,5L21,19L14,19L14,21L21,21C22.1,21 23,20.1 23,19L23,5C23,3.9 22.1,3 21,3Z" />
      </svg>
    </button>

    {Astro.url.pathname !== `/news/${slug}` && Astro.url.pathname !== `/news/${slug}/` && (
      <a href={`/news/${slug}`} class="text-xs md:text-sm text-stone-300 hover:text-white underline decoration-1 hover:decoration-2 whitespace-nowrap hidden xs:block">
        Article
      </a>
    )}
  </div>
</div>


